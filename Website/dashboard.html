<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - SecureShare</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="bg-gradient-1"></div>
        <div class="bg-gradient-2"></div>
        <div class="bg-gradient-3"></div>
    </div>

    <header class="dashboard-header">
        <nav class="dashboard-nav">
            <div class="dashboard-nav-left">
                <div class="logo-section">
                    <div class="logo-icon">
                        <svg class="shield-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2L4 5v6c0 5.55 3.84 10.74 8 12 4.16-1.26 8-6.45 8-12V5l-8-3z"/>
                        </svg>
                    </div>
                    <div>
                        <div class="logo-text">SecureShare</div>
                        <div style="font-size: 12px; color: #666;">Enterprise File Sharing & DLP</div>
                    </div>
                </div>
            </div>
            <div class="dashboard-nav-center">
                <a href="dashboard.html" class="nav-item active">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    <span>Dashboard</span>
                </a>
                <a href="files.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span>Files</span>
                </a>
                <a href="upload.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    <span>Upload</span>
                </a>
                <a href="activity.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                    </svg>
                    <span>Activity</span>
                </a>
            </div>
            <div class="dashboard-nav-right">
                <div class="notification-bell" id="notificationBell">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    <span class="notification-dot" id="notificationDot" style="display: none;"></span>
                </div>
                <a href="settings.html" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"></path>
                    </svg>
                    <span>Settings</span>
                </a>
                <a href="upload.html" class="quick-action-btn header-btn" id="upload-btn-header" style="display: none;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    <span>Upload File</span>
                </a>
                <a href="files.html" class="quick-action-btn header-btn header-btn-secondary">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span>View Files</span>
                </a>
                <a href="index.html" class="nav-item logout-item" id="logoutBtn">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                    <span>Logout</span>
                </a>
            </div>
        </nav>
    </header>

    <main class="dashboard-content">
        <!-- Welcome Section -->
        <div class="dashboard-welcome">
            <div>
                <h1 class="page-title">Welcome back, <span id="userName">User</span>!</h1>
                <p class="page-subtitle">Here's your security overview and file sharing activity</p>
            </div>
            <div class="quick-actions">
                <a href="upload.html" class="quick-action-btn" id="upload-btn" style="display: none;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    Upload File
                </a>
                <a href="files.html" class="quick-action-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                    View Files
                </a>
            </div>
        </div>

        <!-- Metrics Grid -->
        <div class="metrics-grid">
            <div class="metric-card modern-metric">
                <div class="metric-header">
                    <div class="metric-icon" style="background: linear-gradient(135deg, rgba(91, 33, 182, 0.1) 0%, rgba(91, 33, 182, 0.2) 100%); color: #5b21b6;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                    </div>
                    <div class="metric-trend" id="encryption-trend">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                            <polyline points="17 6 23 6 23 12"></polyline>
                        </svg>
                    </div>
                </div>
                <div class="metric-value" id="encrypted-files-count" style="color: #5b21b6;">0</div>
                <div class="metric-label">
                    <div style="font-weight: 600; margin-bottom: 4px; display: flex; align-items: center; gap: 6px;">
                        Encrypted Files
                        <div class="info-icon-wrapper">
                            <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                            <div class="info-tooltip">
                                <div class="tooltip-content">
                                    <strong>Encrypted Files</strong>
                                    <p>Total number of files that have been encrypted using AES-256 encryption. This metric shows how many files are currently protected with end-to-end encryption to ensure data security and privacy.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="encryption-rate" style="color: #999; font-size: 12px;">encryption rate 100%</div>
                </div>
            </div>

            <div class="metric-card modern-metric">
                <div class="metric-header">
                    <div class="metric-icon" style="background: linear-gradient(135deg, rgba(153, 27, 27, 0.1) 0%, rgba(153, 27, 27, 0.2) 100%); color: #991b1b;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                            <line x1="12" y1="9" x2="12" y2="13"></line>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                    </div>
                    <div class="metric-trend" id="risk-trend">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"></polyline>
                            <polyline points="17 18 23 18 23 12"></polyline>
                        </svg>
                    </div>
                </div>
                <div class="metric-value" id="high-risk-count" style="color: #991b1b;">0</div>
                <div class="metric-label">
                    <div style="font-weight: 600; margin-bottom: 4px; display: flex; align-items: center; gap: 6px;">
                        High Risk Alerts
                        <div class="info-icon-wrapper">
                            <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                            <div class="info-tooltip">
                                <div class="tooltip-content">
                                    <strong>High Risk Alerts</strong>
                                    <p>Security alerts that require immediate attention. These include unauthorized access attempts, suspicious file activities, policy violations, or other critical security events that pose a significant threat to your data.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="color: #999; font-size: 12px;">Requires attention</div>
                </div>
            </div>

            <div class="metric-card modern-metric">
                <div class="metric-header">
                    <div class="metric-icon" style="background: linear-gradient(135deg, rgba(6, 95, 70, 0.1) 0%, rgba(6, 95, 70, 0.2) 100%); color: #065f46;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                        </svg>
                    </div>
                    <div class="metric-trend" id="events-trend">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                            <polyline points="17 6 23 6 23 12"></polyline>
                        </svg>
                    </div>
                </div>
                <div class="metric-value" id="security-events-count" style="color: #065f46;">0</div>
                <div class="metric-label">
                    <div style="font-weight: 600; margin-bottom: 4px; display: flex; align-items: center; gap: 6px;">
                        Security Events
                        <div class="info-icon-wrapper">
                            <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                            <div class="info-tooltip">
                                <div class="tooltip-content">
                                    <strong>Security Events</strong>
                                    <p>Total number of security-related events recorded in the last 24 hours. This includes file access logs, download activities, upload events, sharing actions, and all other security-monitored activities in your system.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="color: #999; font-size: 12px;">Last 24 hours</div>
                </div>
            </div>

            <div class="metric-card modern-metric">
                <div class="metric-header">
                    <div class="metric-icon" style="background: linear-gradient(135deg, rgba(30, 64, 175, 0.1) 0%, rgba(30, 64, 175, 0.2) 100%); color: #1e40af;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="9" y1="15" x2="15" y2="15"></line>
                        </svg>
                    </div>
                    <div class="metric-trend" id="files-trend">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                            <polyline points="17 6 23 6 23 12"></polyline>
                        </svg>
                    </div>
                </div>
                <div class="metric-value" id="active-files-count" style="color: #1e40af;">0</div>
                <div class="metric-label">
                    <div style="font-weight: 600; margin-bottom: 4px; display: flex; align-items: center; gap: 6px;">
                        Active Files
                        <div class="info-icon-wrapper">
                            <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                            <div class="info-tooltip">
                                <div class="tooltip-content">
                                    <strong>Active Files</strong>
                                    <p>Number of files that are currently accessible and shared. These files have valid access permissions, are not expired, and can be downloaded or viewed by authorized users. This excludes revoked or expired files.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="total-files-text" style="color: #999; font-size: 12px;">of 0 total</div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="dashboard-grid">
            <!-- DLP Protection Status Card -->
            <div class="card modern-card">
                <div class="card-header">
                    <h3 class="card-title">DLP Protection Status</h3>
                    <p class="card-subtitle">Data leak prevention measures active</p>
                </div>
                <div class="protection-list">
                    <div class="protection-item">
                        <div class="protection-info">
                            <svg class="protection-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2L4 5v6c0 5.55 3.84 10.74 8 12 4.16-1.26 8-6.45 8-12V5l-8-3z"/>
                            </svg>
                            <span>End-to-End Encryption</span>
                        </div>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    <div class="protection-item">
                        <div class="protection-info">
                            <svg class="protection-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                            <span>Access Control</span>
                        </div>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    <div class="protection-item">
                        <div class="protection-info">
                            <svg class="protection-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2"></rect>
                                <path d="M9 9h6v6H9z"></path>
                            </svg>
                            <span>Audit Logging</span>
                        </div>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    <div class="protection-item">
                        <div class="protection-info">
                            <svg class="protection-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                <circle cx="12" cy="12" r="3"></circle>
                            </svg>
                            <span>Watermarking</span>
                        </div>
                        <span class="status-badge status-optional">Optional</span>
                    </div>
                </div>
            </div>

            <!-- Security Alerts Card -->
            <div class="card modern-card">
                <div class="card-header">
                    <h3 class="card-title">Security Alerts</h3>
                    <p class="card-subtitle">Recent security events requiring attention</p>
                </div>
                <div id="security-alerts-container">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <p>Loading alerts...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activity Section -->
        <div class="card modern-card" style="margin-top: 24px;">
            <div class="card-header">
                <h3 class="card-title">Recent Activity</h3>
                <a href="activity.html" class="view-all-link">View All â†’</a>
            </div>
            <div id="recent-activity-container">
                <div class="loading-state">
                    <div class="loading-spinner"></div>
                    <p>Loading recent activity...</p>
                </div>
            </div>
        </div>
    </main>

    <script src="js/script.js"></script>
    <script>
        // Dashboard-specific functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Check authentication
            checkAuthentication();
            
            // Load user info
            loadUserInfo();
            
            // Show/hide upload button based on permissions
            if (typeof canUpload === 'function' && canUpload()) {
                const uploadBtn = document.getElementById('upload-btn');
                const uploadBtnHeader = document.getElementById('upload-btn-header');
                if (uploadBtn) {
                    uploadBtn.style.display = 'flex';
                }
                if (uploadBtnHeader) {
                    uploadBtnHeader.style.display = 'flex';
                }
            }
            
            // Load dashboard metrics
            loadDashboardMetrics();
            
            // Load recent activity
            loadRecentActivity();
            
            // Setup logout
            setupLogout();
            
            // Setup notifications
            setupNotifications();
            
            // Auto-refresh every 30 seconds
            setInterval(() => {
                loadDashboardMetrics();
                loadRecentActivity();
            }, 30000);
        });

        // Check if user is authenticated
        function checkAuthentication() {
            const token = sessionStorage.getItem('user_token') || 
                         sessionStorage.getItem('auth_token') || 
                         sessionStorage.getItem('userToken') ||
                         localStorage.getItem('user_token') || 
                         localStorage.getItem('auth_token') ||
                         localStorage.getItem('userToken');
            
            if (!token) {
                // Redirect to login
                sessionStorage.setItem('redirectAfterLogin', 'dashboard.html');
                window.location.href = 'login.html';
                return;
            }
        }

        // Load user information
        function loadUserInfo() {
            try {
                const userStr = sessionStorage.getItem('user') || sessionStorage.getItem('currentUser');
                if (userStr) {
                    const user = JSON.parse(userStr);
                    const userNameEl = document.getElementById('userName');
                    if (userNameEl && user.name) {
                        userNameEl.textContent = user.name;
                    }
                }
            } catch (e) {
                console.error('Error loading user info:', e);
            }
        }

        // Setup logout functionality
        function setupLogout() {
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', async function(e) {
                    e.preventDefault();
                    
                    if (confirm('Are you sure you want to logout?')) {
                        try {
                            const token = sessionStorage.getItem('user_token') || 
                                         sessionStorage.getItem('auth_token') || 
                                         sessionStorage.getItem('userToken');
                            
                            if (token) {
                                const formData = new FormData();
                                formData.append('action', 'logout');
                                formData.append('token', token);
                                
                                await fetch('api.php', {
                                    method: 'POST',
                                    body: formData
                                });
                            }
                        } catch (error) {
                            console.error('Logout error:', error);
                        } finally {
                            // Clear all storage
                            sessionStorage.clear();
                            localStorage.clear();
                            
                            // Redirect to login
                            window.location.href = 'login.html';
                        }
                    }
                });
            }
        }

        // Setup notifications
        function setupNotifications() {
            const notificationBell = document.getElementById('notificationBell');
            const notificationDot = document.getElementById('notificationDot');
            
            if (notificationBell) {
                notificationBell.addEventListener('click', function() {
                    // Toggle notification panel (can be expanded later)
                    showNotification('No new notifications', 'info');
                    if (notificationDot) {
                        notificationDot.style.display = 'none';
                    }
                });
            }
        }

        // Load recent activity
        async function loadRecentActivity() {
            try {
                const token = sessionStorage.getItem('user_token') || 
                             sessionStorage.getItem('auth_token') || 
                             sessionStorage.getItem('userToken') ||
                             localStorage.getItem('user_token') || 
                             localStorage.getItem('auth_token') ||
                             localStorage.getItem('userToken');

                if (!token) {
                    return;
                }

                const formData = new FormData();
                formData.append('action', 'list_files');
                formData.append('token', token);

                const response = await fetch('api.php', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();
                const container = document.getElementById('recent-activity-container');

                if (data.success && data.files) {
                    const recentFiles = data.files.slice(0, 5);
                    
                    if (recentFiles.length > 0) {
                        container.innerHTML = recentFiles.map(file => {
                            const uploadDate = new Date(file.uploaded_at);
                            const timeAgo = getTimeAgo(uploadDate);
                            
                            return `
                                <div class="activity-item-small">
                                    <div class="activity-icon">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                            <polyline points="14 2 14 8 20 8"></polyline>
                                        </svg>
                                    </div>
                                    <div class="activity-content">
                                        <div class="activity-title">${file.name}</div>
                                        <div class="activity-meta">Uploaded ${timeAgo}</div>
                                    </div>
                                    <div class="activity-status">
                                        ${file.encrypted ? '<span class="status-badge status-active" style="font-size: 10px;">Encrypted</span>' : ''}
                                    </div>
                                </div>
                            `;
                        }).join('');
                    } else {
                        container.innerHTML = '<div class="empty-state">No recent activity</div>';
                    }
                } else {
                    container.innerHTML = '<div class="empty-state">No recent activity</div>';
                }
            } catch (error) {
                console.error('Error loading recent activity:', error);
                const container = document.getElementById('recent-activity-container');
                if (container) {
                    container.innerHTML = '<div class="empty-state">Error loading activity</div>';
                }
            }
        }

        // Get time ago string
        function getTimeAgo(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);

            if (diffMins < 1) return 'just now';
            if (diffMins < 60) return `${diffMins} minute${diffMins > 1 ? 's' : ''} ago`;
            if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;
            if (diffDays < 7) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;
            return date.toLocaleDateString();
        }

        // Enhanced updateDashboardMetrics with animations
        const originalUpdateDashboardMetrics = window.updateDashboardMetrics;
        if (originalUpdateDashboardMetrics) {
            window.updateDashboardMetrics = function(files) {
                originalUpdateDashboardMetrics(files);
                
                // Add number animation
                animateNumbers();
            };
        }

        // Animate numbers when they change
        function animateNumbers() {
            const metricValues = document.querySelectorAll('.metric-value');
            metricValues.forEach(el => {
                const finalValue = parseInt(el.textContent) || 0;
                if (finalValue > 0) {
                    animateValue(el, 0, finalValue, 1000);
                }
            });
        }

        // Animate number value
        function animateValue(element, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                const current = Math.floor(progress * (end - start) + start);
                element.textContent = current;
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                } else {
                    element.textContent = end;
                }
            };
            window.requestAnimationFrame(step);
        }

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>
